generator client {
  provider = "prisma-client-js"
}

generator erd {
  provider = "prisma-erd-generator"
  output   = "./ERD.svg"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model aplicativo {
  id              Int                        @id @default(autoincrement())
  nombre          String
  direccion_ip    String
  puerto          Int
  url             String
  tipo_red        String
  escalamiento    String
  estado          aplicativo_estado          @default(HABILITADO)
  tipo_aplicativo aplicativo_tipo_aplicativo
  campanas        campana[]
}

model campana {
  id                          Int                        @id @default(autoincrement())
  nombre_campana              String
  cliente                     String
  director_operacion_abai     String
  correo_director             String
  segmento                    String?
  nombre_gte_campana          String?
  correo_gte_campana          String?
  ubicacion_sedes             String
  puestos_operacion           Int
  puestos_estructura          Int
  segmento_red                String
  fecha_actualizacion         DateTime
  nombre_contacto_cliente     String
  correo_contacto_cliente     String
  telefono_contacto_cliente   String
  nombre_contacto_comercial   String
  correo_contacto_comercial   String
  telefono_contacto_comercial String
  soporte_tecnico_abai        String
  correo_soporte_abai         String
  servicios_prestados         String?
  imagen_cliente              String?
  imagen_sede                 String?
  estado                      campana_estado             @default(HABILITADO)
  aplicativoId                Int?
  matrizId                    Int?
  aplicativo                  aplicativo?                @relation(fields: [aplicativoId], references: [id])
  matrizescalamiento          matrizescalamiento?        @relation(fields: [matrizId], references: [id])
  matrizescalamientoglobal matrizescalamientoglobal[] @relation("CampanaMatrizGlobal") 
  @@index([aplicativoId])
  @@index([matrizId])
}

model matrizescalamiento {
  id                   Int                       @id @default(autoincrement())
  proveedor            String
  codigo_servicio      String
  n_telefono_proveedor String
  n_telefono_asesor    String
  estado               matrizescalamiento_estado @default(HABILITADO)
  campanas campana[]
}

model matrizescalamientoglobal {
  id                   Int                             @id @default(autoincrement())
  proveedor            String
  codigo_servicio      String
  n_telefono_proveedor String
  n_telefono_asesor    String
  estado               matrizescalamientoglobal_estado @default(HABILITADO)
  campana campana[] @relation("CampanaMatrizGlobal") // ðŸ‘ˆ Nombre cambiado
}

enum matrizescalamiento_estado {
  HABILITADO
  DESHABILITADO
}

enum matrizescalamientoglobal_estado {
  HABILITADO
  DESHABILITADO
}

enum aplicativo_estado {
  HABILITADO
  DESHABILITADO
}

enum aplicativo_tipo_aplicativo {
  internet
  abai
  proveedor
}

enum campana_estado {
  HABILITADO
  DESHABILITADO
}
